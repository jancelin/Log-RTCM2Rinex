server {
  listen 80;
  server_name _;

  charset utf-8;

  # Accueil: page HTML inline (garde le bon host/port, pas de redirect)
  location = / {
    default_type text/html;
    return 200 '<!doctype html>
<html lang="fr">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Centipede RINEX</title></head>
<body>
<h1>Centipede RINEX archives</h1>
<ul>
  <li><a href="/centipede_30s/">centipede_30s/</a></li>
  <li><a href="/centipede_1s/">centipede_1s/</a></li>
</ul>
</body></html>';
  }

  # Normaliser sans slash final
  location = /centipede_30s { return 301 /centipede_30s/; }
  location = /centipede_1s  { return 301 /centipede_1s/; }

  # Expose uniquement ces 2 dossiers
  location /centipede_30s/ {
    alias /srv/pub/centipede_30s/;
    autoindex on;
    autoindex_exact_size off;
    autoindex_localtime off;
    default_type text/plain;
    types { }
  }

  location /centipede_1s/ {
    alias /srv/pub/centipede_1s/;
    autoindex on;
    autoindex_exact_size off;
    autoindex_localtime off;
    default_type text/plain;
    types { }
  }

  # Tout le reste: interdit
  location / {
    return 404;
  }
}

